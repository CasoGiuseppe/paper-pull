
<link rel="import" href="../polymer/polymer.html"/>
<link rel="import" href="../iron-icons/iron-icons.html"/>
<link rel="import" href="../iron-ajax/iron-ajax.html"/>
<link rel="import" href="../iron-resizable-behavior/iron-resizable-behavior.html"/>
<dom-module id="paper-pull">
  <template>
    <style>:host{display:block;font-family:'Wire One',serif}:host::content figure,:host::content h2,:host::content h3,:host::content li,:host::content p,:host::content ul{margin:0;padding:0;list-style:none;font-weight:400}:host::content .paper-pull--builded--wrap{margin:auto;height:500px;background:red}:host::content .paper-pull--builded--list{position:relative}:host::content .paper-pull--builded--cell{position:absolute;background:#fff;box-shadow:0 0 8px 0 rgba(28,45,206,.6);border-radius:1 px;overflow:hidden;transition:all .5s ease-out}:host::content .paper-pull--builded--article{width:100%}:host::content .paper-pull--hover{cursor:pointer}:host::content .paper-pull--short--header{width:100%;padding:10px;box-sizing:border-box}:host::content .paper-pull--short--title{font-family:'Josefin Slab',serif}:host::content .paper-pull--short--description{width:100%;position:absolute;padding:10px;bottom:0;z-index:10;box-sizing:border-box;color:#fff}:host::content .paper-pull--type--picture--wrap{position:relative}:host::content .paper-pull--type--picture--wrap:after{position:absolute;width:100%;height:100%;top:0;left:0;content:'';background:linear-gradient(to bottom,transparent 30%,rgba(0,0,0,.75) 96%,rgba(0,0,0,.67) 100%);transition:background .3s linear}:host::content .paper-pull--type--picture--wrap .paper-pull--short--header{position:absolute;top:50%;z-index:10;-webkit-transform:translate3d(0,-50%,0);transform:translate3d(0,-50%,0)}:host::content .paper-pull--type--picture--wrap .paper-pull--short--header *{color:#fff;text-align:center}:host::content .paper-pull--type--picture--wrap.paper-pull--hover:hover img{-webkit-transform:translate3d(0,-20%,0);transform:translate3d(0,-20%,0)}:host::content .paper-pull--type--picture--wrap img{display:block;width:100%;transition:-webkit-transform .3s ease-out;transition:transform .3s ease-out;transition:transform .3s ease-out,-webkit-transform .3s ease-out}</style>
    <template is="dom-if" if="{{ _isAjax() }}">
      <iron-ajax auto="auto" url="{{ src }}" handle-as="text" on-response="_ajaxResponse"></iron-ajax>
    </template>
    <content></content>
  </template>
  <script>(function(){Polymer({is:"paper-pull",behaviors:[Polymer.IronResizableBehavior],listeners:{"iron-resize":"_onResize"},_get_component:function(){var t,e;return t=this,e=[],e.push(t),e},_get_windowWidth:function(){return window.innerWidth},_get_pins:function(){var t,e;return t=this,e=t.querySelector(".paper-pull-wrap"),e.getElementsByTagName("*")},_get_pin:function(t){var e;return e=this._get_pins(),e[t]},_get_pinColumn:function(){var t,e,i,n,s;return s=this._get_nodeValue(this._get_component(),0,"wrapwidth")?parseFloat(this._get_nodeValue(this._get_component(),0,"wrapwidth")):this._get_windowWidth(),n=this._get_nodeValue(this._get_component(),0,"pinwidth")?parseFloat(this._get_nodeValue(this._get_component(),0,"pinwidth")):this._set_defaultValue("pinWidth"),i=this._get_nodeValue(this._get_component(),0,"pinspace")?parseFloat(this._get_nodeValue(this._get_component(),0,"pinspace")):this._set_defaultValue("pinMargin"),t=this._get_nodeValue(this._get_component(),0,"centered"),e=null!==t&&void 0!==t&&"false"!==t?Math.floor(s/(n+2*i)):Math.floor(s/(n+i)),parseFloat(e)},_get_pinLeftPosition:function(t,e){var i,n;return n=this._get_nodeValue(this._get_component(),0,"pinwidth")?parseFloat(this._get_nodeValue(this._get_component(),0,"pinwidth")):this._set_defaultValue("pinWidth"),i=this._get_nodeValue(this._get_component(),0,"pinspace")?parseFloat(this._get_nodeValue(this._get_component(),0,"pinspace")):this._set_defaultValue("pinMargin"),i+t*(n+i)+e},_get_allAttributes:function(t){return t.attributes},_get_allAttributeValues:function(t){var e,i,n,s,l,_,a;for(l="",a="",_={},n=i=0,s=t.length;i<s;n=++i)e=t[n],l=e.nodeName,a=e.nodeValue,_[l]=a;return _},_get_nodeValue:function(t,e,i){var n,s;if(n=this._set_nodesValues(t),void 0!==(s=null!==i&&void 0!==i?n[e][i]:n[e])&&null!==s)return s},_get_nodeExist:function(t,e){var i;return i=[],void 0!==e&&null!==e&&i.push([t,e]),i},_get_propertyExist:function(t,e){return t.hasOwnProperty(e)},_get_minValueInArray:function(t){return Math.min.apply(Math,t)},_get_indexInArray:function(t,e){var i,n,s,l;for(e.length,s=n=0,l=e.length;n<l;s=++n)if(i=e[s],t===parseFloat(i))return s;return!1},_set_defaultValue:function(t){var e;return e=[{pinWidth:300,pinMargin:0}],e[0][t]},_set_pinConfPosition:function(){var t,e,i,n,s,l,_;for(t=this.querySelectorAll(".paper-pull--builded--cell"),l=this._get_nodeValue(this._get_component(),0,"pinspace")?parseFloat(this._get_nodeValue(this._get_component(),0,"pinspace")):this._set_defaultValue("pinMargin"),_=[],e=this._get_pinColumn(),n=i=0,s=t.length;i<s;n=++i)t[n],n<e&&_.push(l);return this._set_pinNewPosition(_)},_set_pinNewPosition:function(t){var e,i,n,s,l,_,a,r,o,u,p,h,d;for(i=this.querySelectorAll(".paper-pull--builded--cell"),this.querySelector(".paper-pull--builded--wrap"),d=this._get_nodeValue(this._get_component(),0,"wrapwidth")?parseFloat(this._get_nodeValue(this._get_component(),0,"wrapwidth")):this._get_windowWidth(),u=this._get_nodeValue(this._get_component(),0,"pinwidth")?parseFloat(this._get_nodeValue(this._get_component(),0,"pinwidth")):this._set_defaultValue("pinWidth"),o=this._get_nodeValue(this._get_component(),0,"pinspace")?parseFloat(this._get_nodeValue(this._get_component(),0,"pinspace")):this._set_defaultValue("pinMargin"),n=this._get_nodeValue(this._get_component(),0,"centered"),h=null!==n&&void 0!==n&&"false"!==n?(d-(u*this._get_pinColumn()+o*(this._get_pinColumn()-1)))/2:0,this._get_pinColumn(),p=[],l=0,a=i.length;l<a;l++)e=i[l],s=e.clientHeight,r=this._get_minValueInArray(t),_=this._get_indexInArray(r,t),e.style.left=this._get_pinLeftPosition(_,h)+"px",e.style.top=r+"px",p.push(t[_]=r+s+o);return p},_set_attributeCollection:function(t){var e,i;return e=[],i=this._get_nodeValue(this._get_pins(),t),Object.getOwnPropertyNames(i).forEach(function(t,n,s){var l,_;return l=t,_=i[t],e.push([l,_])}),e},_set_nodesValues:function(t){var e,i,n,s,l,_;for(e=[],l=s=0,_=t.length;s<_;l=++s)n=t[l],i=this._get_allAttributes(n),e.push(this._get_allAttributeValues(i));return e},_build_structureWrap:function(){var t,e,i,n,s,l,_,a,r,o,u,p,h;for(o=this._get_pins(),a=this._get_nodeValue(this._get_component(),0,"wrapwidth")?parseFloat(this._get_nodeValue(this._get_component(),0,"wrapwidth")):this._get_windowWidth(),h=this._build_element({type:"section",classes:[["paper-pull--builded--wrap"]],styles:[["maxWidth",a+"px"]]}),_=this._build_element({type:"ul",classes:[["paper-pull--builded--list"]]}),s=n=0,l=o.length;n<l;s=++n)i=o[s],u=i.tagName.toLowerCase(),p=this._get_nodeValue(this._get_component(),0,"pinwidth")?parseFloat(this._get_nodeValue(this._get_component(),0,"pinwidth")):this._set_defaultValue("pinWidth"),r=this._build_element({type:"li",classes:[["paper-pull--builded--cell"]],styles:[["width",p+"px"]]}),_.appendChild(r),t=this._build_element({type:"article",classes:[["paper-pull--builded--article"],["paper-pull--type--"+u]],attributes:[["role","contentinfo"],["aria-label","article"]]}),r.appendChild(t),e="_build_"+u,t.appendChild(this[e](r,s,u)),s===o.length-1&&this.setAttribute("class","loaded");return h.appendChild(_),this.appendChild(h)},_build_default:function(){},_build_picture:function(t,e,i){var n,s,l,_,a,r,o,u;return s=this,n=this._get_nodeValue(this._get_pins(),e,"aria-labelledby"),o=this._get_nodeValue(this._get_pins(),e,"src"),u=this._build_element({type:"figure",classes:[["paper-pull--type--"+i+"--wrap"]],attributes:[["aria-labelledby",n]]}),this._remove_attributes(this._get_pin(e),"aria-labelledby"),a=this._build_relatedContent("header",e,"header"),a&&u.appendChild(a),_=this._build_relatedContent("description",e,"figcaption"),_&&u.appendChild(_),l=this._build_content(e,i),r=new Image,r.onload=function(){return l.src=this.src,s._set_pinConfPosition()},r.src=o,u.appendChild(l),u},_build_youtube:function(t,e,i){var n,s,l,_;return _=this._get_nodeValue(this._get_pins(),e,"video"),s=_.replace("/watch?v=","/embed/"),n=this._get_nodeValue(this._get_pins(),e,"aria-labelledby"),l=_.indexOf("youtube.com/watch?v=")>-1?s+"?autoplay=0":_+"?autoplay=0",this._build_element({type:"iframe",classes:[["paper-pull--type--"+i+"--wrap"]],attributes:[["aria-labelledby",n],["frameborder","0"],["allowfullscreen",""],["src",l]]})},_build_content:function(t,e){return this._build_element({type:this._replace_tag(e),attributes:this._set_attributeCollection(t)})},_build_relatedContent:function(t,e,i){var n;return n="_build_related_"+t,this[n](t,e,i)},_build_related_header:function(t,e,i){var n,s,l,_;return _=this._get_nodeValue(this._get_pins(),e,"title"),n=this._get_nodeValue(this._get_pins(),e,"claim"),this._get_nodeValue(this._get_pins(),e,"description"),(void 0!==_&&null!==_||void 0!==n&&null!==n)&&(l=this._build_element({type:i,classes:[["paper-pull--short--"+t]]}),void 0!==_&&null!==_&&(s=this._build_element({type:"h2",classes:[["paper-pull--short--title"]],content:_}),l.appendChild(s),this._remove_attributes(this._get_pin(e),"title")),void 0!==n&&null!==n&&(s=this._build_element({type:"h3",classes:[["paper-pull--short--claim"]],content:n}),l.appendChild(s),this._remove_attributes(this._get_pin(e),"claim")),l)},_build_related_description:function(t,e,i){var n;return void 0!==(n=this._get_nodeValue(this._get_pins(),e,"description"))&&null!==n&&(n=this._build_element({type:i,classes:[["paper-pull--short--"+t]],content:n}),this._remove_attributes(this._get_pin(e),"description"),n)},_build_element:function(t){var e,i,n,s,l,_,a,r,o,u,p;if(e=document.createElement(t.type),null!==t.classes&&void 0!==t.classes)for(o=t.classes,n=i=0,_=o.length;i<_;n=++i)o[n],e.className+=t.classes[n]+" ";if(null!==t.attributes&&void 0!==t.attributes)for(u=t.attributes,n=s=0,a=u.length;s<a;n=++s)u[n],null!==t.attributes[n][1]&&void 0!==t.attributes[n][1]&&e.setAttribute(t.attributes[n][0],t.attributes[n][1]);if(null!==t.content&&void 0!==t.content&&(e.innerHTML=t.content),null!==t.styles&&void 0!==t.styles)for(p=t.styles,n=l=0,r=p.length;l<r;n=++l)p[n],e.style[t.styles[n][0]]=t.styles[n][1];return e},_replace_tag:function(t){var e;switch(t){case"picture":e="img";break;case"default":e="p"}return e},_remove_attributes:function(t,e){return t.removeAttribute(e)},attached:function(){return this._build_structureWrap()},ready:function(){},_onLoad:function(){},_onResize:function(){var t;if(t=this,t.classList.contains("loaded"))return this._set_pinConfPosition()},_test:function(){var t;return t=[],t.push(this),this._build_structureWrap()}})}).call(this);</script>
</dom-module>